<!--
	client.html

	In the simple chat application, when a new client is connected, the client application prompts for a name and then broadcasts to other connected clients that this person has now entered the chat room. The client application also provides a text field to send messages (just press enter key), and provides place where new messages from all participants are printed.

	BoYu (boyu2011@gmail.com)
-->

<!doctype html> 
<html lang="en"> 
	<head>
		<meta charset="utf-8">
		<title>Simple Chat App using NodeJS and SocketIO</title>
		<LINK href="style.css" rel="stylesheet" type="text/css">		
		<script src="/socket.io/socket.io.js"></script>
		<script src="http://code.jquery.com/jquery-latest.js"></script>
		<script>
			var socket = io.connect('http://127.0.0.1:8000');
			socket.on('connect', function() {
				socket.emit('addme', prompt('What is your name?'));
			});

			socket.on('chat',function(username, data) { 
				var p = document.createElement('p');
				p.innerHTML = username + ': ' + data;
				document.getElementById('output').appendChild(p);
			});
			
			$(document).ready(function(){
  				$("#data").keypress(function(event){
					if(event.which == '13'){
						var text = document.getElementById('data').value;
						socket.emit('sendchat', text);					
					}
  				});
			});
		</script>
	</head>

	<body>
		<div id="output"></div>
		<div id="send">
			<input type="text" id="data" size="100" /><br />
		</div>
	</body>
</html>